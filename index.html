<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Decipher XML Generator — AI Assisted</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>

<body>

<div class="app">

<header>
  <h1>Decipher XML Generator — AI Assisted</h1>
  <p class="subtitle">Paste or upload a question block or DOCX. AI extracts fields automatically. Edit + generate Decipher XML.</p>
</header>

<section class="controls">
  <div class="left">
    <label>Paste question block or DOCX text</label>
    <textarea id="pasteArea" placeholder="Paste the question block(s) here..."></textarea>

    <div class="row">
      <input id="docxUpload" type="file" accept=".docx" />
      <input id="apiKey" type="password" placeholder="OpenAI API key (optional)" />
      <button id="aiBtn" class="btn">AI Extract</button>
      <button id="heuristicBtn" class="btn secondary">Local Extract</button>
    </div>

    <div class="hint">
      Uploading DOCX extracts raw text from Word automatically.  
      AI extraction stays in your browser — API key is never uploaded anywhere.
    </div>
  </div>

  <div class="right">
    <label>Detected / Added Questions</label>
    <div id="questionsList" class="questionsList"></div>

    <div class="q-controls">
      <button id="addQuestionBtn" class="btn">+ Add Blank Question</button>
      <button id="generateAllBtn" class="btn">Generate XML</button>
      <button id="downloadAllBtn" class="btn" disabled>Download XML</button>
    </div>
  </div>
</section>

<section id="editorSection" class="editor">
  <!-- Dynamic editor injected here -->
</section>

<section class="output">
  <h3>XML Output</h3>
  <pre id="xmlOut" class="xmlOut">&lt;!-- XML will appear here --&gt;</pre>

  <div class="output-actions">
    <input id="outFilename" type="text" value="survey.xml" />
    <button id="downloadXmlBtn" class="btn" disabled>Download XML</button>
  </div>
</section>

<footer class="footer">
  <div>Built for you — offline-first app + optional AI. Tell me anytime if you need upgrades.</div>
</footer>

</div>

<script src="app.js"></script>
</body>
</html>
